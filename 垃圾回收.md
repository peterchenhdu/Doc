# Java垃圾回收

##关注两点

* `如何判断垃圾`
* `如何回收垃圾`

##垃圾判断

*  引用计数法，技术为0的为垃圾，不过会有循环引用的问题；
*  可达性分析法，“GC Roots”的对象作为起始点，不能到达的为垃圾；GC Roots(如启动类加载器加载的对象，活着的线程对象等)

##垃圾回收
采用分代回收策略，首先，把不同生命周期的对象放在不同代上（新生代、老年代、永久代），不同代采用不同的回收算法；

###不同生命周期的对象放在不同代上
* 新生代=Eden区+两个大小相等的Survivor区，生命周期短；
* 老年代=生命周期较长的，从新生代拷贝过来的对象；
* 永久代=存放类的元数据和常量等；
![mahua](http://images.cnblogs.com/cnblogs_com/chenpi/809071/o_jvm.png)



新生代GC指对Eden区和其中一个Survivor区进行回收，存活的复制到另外一个Survivor区；
经历过N次GC后还存活的，会拷贝到老年代；
或者当GC的时候，Survivor区空间不足也会拷贝到老年代；  

Full GC指对整个堆进行GC，包括Young、Old和Perm。在对JVM调优的过程中，
很大一部分工作就是对于FullGC的调节。尽可能减少Full GC的次数


##不同代采用不同的回收算法
有三种回收算法，

* 复制算法（效率高，但资源浪费）-->适用新生代
* 标记清除算法（效率不高，且存在内存碎片）
* 标记整理算法（不存在内存碎片）-->适用老年代

  
  
from http://www.cnblogs.com/chenpi/p/5588851.html
